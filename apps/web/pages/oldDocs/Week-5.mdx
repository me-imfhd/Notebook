
## MUI & Routing

## Designing Components


---


> üí° Some Alpha, for hiring mobile engineers, 8000 Impressions, 100 Emails, 2 Interviews. This filtrating took 10 seconds. _Live projects made selection, not resumes_.


**Components** : Collection of HTML tags abstracted/kept inside a function. **Props** : Way to send data from one component to another. 


```javascript
// To write components in separate file, say Signup
function Signup(){
	...
}

export default Signup;

// and Import where want to use.
import Signup from "./Signup.jsx"
```


**Material UI** : The default styling of components is ugly, either we can write own CSS, or use existing libraries where components are pre-styled. One of which is [Material UI](https://mui.com/)


```javascript
// Install
npm install @mui/material @emotion/react @emotion/style
```


```javascript
// Import
import Button from '@mui/material/Button';

// Use
<Button variant="contained">Hello World</Button>
```


**Changing Font** 


```javascript
// Add font CDN to index.html, Mandatory
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
```


**Changing Font in** _**individual component**_


```javascript
// Inside particular component

import { createTheme, ThemeProvider } from '@mui/material/styles';

const theme = createTheme({
	typography: {
	  fontFamily: 'Poppins, sans-serif', // Replace with your desired font
	},
});

function Signup() {
  return (
	<ThemeProvider theme={theme}>
    ...
   </ThemeProvider>
  );
}
```


**Changing font in** _**all Components**_


```javascript
**// Inside App.jsx**

import React from 'react';
import { createTheme, ThemeProvider } from '@mui/material/styles';

const theme = createTheme({
  typography: {
    fontFamily: 'Poppins, sans-serif', // Replace with your desired font
  },
});


function App() {
  return (
    <ThemeProvider theme={theme}>
       {/* Your components */}
    </ThemeProvider>
  );
}

export default App;
```


**Login-In Component**


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/80c5ef55-98af-454d-bc86-21f8738878b6/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150701Z&X-Amz-Expires=3600&X-Amz-Signature=d45aa91e589363af4b098d036a6f8984f1ebaad81cf5da29c5cd54826e17dbb5&X-Amz-SignedHeaders=host&x-id=GetObject)


```javascript
import { Box, FormControl, TextField, Button, Typography } from '@mui/material';

function Login() {
  return (
      <Box display="flex" flexDirection="column" justifyContent="center" alignItems="center" height="100vh" backgroundColor="#ffffff">
        <Typography variant="h6" component="h6" gutterBottom> Login </Typography>
        <FormControl>
          <TextField fullWidth label="Email" variant="outlined" margin="normal" sx={{ marginBottom: '1rem' }} />
          <TextField fullWidth label="Password" variant="outlined" margin="normal" sx={{ marginTop: '0rem', marginBottom: '1rem' }} />
          <Button variant="contained" size="large"> Submit </Button>
        </FormControl>
      </Box>
  );
}

export default Login;
```


> ‚ö†Ô∏è **`sx`** prop, overrides directly component's property. Instead of writing inline styles.


**Header Component**


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/11352de9-ed83-4a76-b54e-60fa29289a29/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150702Z&X-Amz-Expires=3600&X-Amz-Signature=65b08175f26b1c4863226f0b1a2fac501a592bdaba8f966195f1351287dc883e&X-Amz-SignedHeaders=host&x-id=GetObject)


```javascript
import { AppBar, Box, Toolbar, Typography, Button } from '@mui/material';

export default function Header() {
  return (
    <Box>
      <AppBar position="static">
        <Toolbar>
          <Typography variant="h6" component="h6" sx={{ flexGrow: 1 }}>Coursera</Typography>
          <Button color="inherit">Login</Button>
          <Button color="inherit">Signup</Button>
        </Toolbar>
      </AppBar>
    </Box>
  );
}
```


## Routing


---


```javascript
// Install & Import in App.JSX
import { BrowserRouter as Router, Routes, Route} from 'react-router-dom';

// Here's how to add the Route.
function App() {

  return (
    <ThemeProvider theme={theme}>
      <Header></Header>
      <Router>
        <Routes>
            <Route path="/login" element={<Login/>}></Route>
            <Route path="/signup" element={<Signup/>}></Route>
        </Routes>
      </Router>
    </ThemeProvider>
    
  )
}
```


**UGLY Approach** : window.location


```javascript
// The UGLY WAY - Reloads the complete page
window.location = '/login'
```


> ‚ö†Ô∏è **Why double curly brackets** : Props are passed inside `{ ‚Ä¶ }`, so if it is a string type, then `{"string"}`, if it is an object, then `{{ flexGrow: 1 }}` that is why two brackets.


**Correct Approach** : No Refresh


```javascript
import {useNavigate} from 'react-router-dom';

const navigate = useNavigate();

const login = () => navigate('/login')
const signup = () => navigate('/signup')

**// ‚ö†Ô∏è Make sure Appbar/Header is inside the <Router></Router>**
```


## Sending Request to Backend


---


**UGLY Way** : getElementById 


```javascript
// Add this function to onClick Event of Button

const sendData = () => {
    let username = document.getElementById('username').value;
    let password = document.getElementById('password').value;
    fetch('http://localhost:3000/admin/signup',{
      method : "POST",
      body: JSON.stringify({username, password}),
      headers: {"Content-type" : "application/json"}
    }).then((response) => response.json())
    .then((data) => localStorage.setItem("token", data.token))
  }
```


**Correct Way** : State Management


```javascript
const [username, setUsername] = useState('');
const [password, setPassword] = useState('');

// Add this function to onChange Event of Input Fields
const usernameHandler = e => setUsername(e.target.value);
const passwordHandler = e => setPassword(e.target.value);

// Then send the corresponding request.
```


> ‚ö†Ô∏è To store the data in local storage `localStorage.setItem( "key", data.token)` and to get the value `localStorage.getItem( "key" )` 


## State Management

## Conditional Rendering of Header


---


If user is **logged in** then it should see **username** and **logout**, not Login, Signup.


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/27238e4b-7774-44f8-b398-c3abf933bd08/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150704Z&X-Amz-Expires=3600&X-Amz-Signature=c85ac1b82e42cc11534469e2cee84d098127c5e1790af3ee1ee0fb36db0179ad&X-Amz-SignedHeaders=host&x-id=GetObject)


```javascript
import { AppBar, Box, Toolbar, Typography, Button } from '@mui/material';
import { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';

export default function Header() {
  const navigate = useNavigate();
  const [loggedIn, setLoggedIn] = useState(false);
  const [username, setUsername] = useState('');

  useEffect(() => {
    fetch( 'http://localhost:3000/admin/profile', { headers: { "Authorization": "Bearer " + localStorage.getItem("token") }})
      .then(response => response.json())
      .then(data => {
        setUsername(data.username);
        setLoggedIn(true);
      })
      .catch(error => {
        console.error('Error fetching username:', error);
        setLoggedIn(false);
      });
  }, []);

  const handleLogin = () => {
    navigate('/login');
  };

  const handleSignup = () => {
    navigate('/signup');
  };

  const handleLogout = () => {
    // Perform logout logic here
    localStorage.setItem("token", null);
    setLoggedIn(false);
    setUsername('');
  };

  return (
    <Box>
      <AppBar position="static">
        <Toolbar>
          <Typography variant="h6" component="h6" sx={{ flexGrow: 1 }}>Coursera </Typography>
          {loggedIn ? (
            <>
              <Typography variant="subtitle1" component="span" sx={{ marginRight: '1rem' }}> {username} </Typography>
              <Button color="inherit" onClick={handleLogout}> Logout </Button>
            </>
          ) : (
            <>
              <Button color="inherit" onClick={handleLogin}> Login </Button>
              <Button color="inherit" onClick={handleSignup}> Signup </Button>
            </>
          )}
        </Toolbar>
      </AppBar>
    </Box>
  );
}
```


## Courses


---


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/a8487c1c-9fcb-4e79-aa9b-22d7c55a313c/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150704Z&X-Amz-Expires=3600&X-Amz-Signature=139aa08c7c3305f54e71b87660b46be966a676196625412eadcdab019307f348&X-Amz-SignedHeaders=host&x-id=GetObject)


```javascript
import { useEffect, useState } from "react";
import { Card, Grid, Box, CardContent, CardMedia, Typography } from '@mui/material';


function Courses() {
  const [courses, setCourses] = useState([]);

  useEffect(() => {
    fetch("http://localhost:3000/admin/courses", {
      headers: { Authorization: "Bearer " + localStorage.getItem("token") }
    })
      .then((response) => response.json())
      .then((data) => setCourses(data.courses));
  }, []);

  return ( <>
	<Box display="flex" justifyContent="center" alignItems="center" minHeight="100vh">
		<Box maxWidth={800}>
			<Typography variant="h4" component="h4" align="center" gutterBottom> Courses </Typography>
			<Grid container spacing={2} justifyContent="center">
				{courses.map((course) => (
				<Grid item xs={12} sm={6} md={4} key={course.title}>
				<Course course={course} />
				</Grid>
				))}
			</Grid>
     		 </Box>
    	</Box>
      </>
      
  );
}

function Course({ course }) {
const { title, description, price, imageLink, published } = course;

return (
	<Card sx={{ maxWidth: 345 }}>
		<CardMedia
		sx={{ height: 140 }}
		image={imageLink}
		title={title}
		/>
		<CardContent>
			<Typography gutterBottom variant="h5" component="div"> {title} </Typography>
			<Typography variant="body2" color="text.secondary"> {description} </Typography>
			<Typography variant="body2" color="text.secondary"> Price: {price} </Typography>
			<Typography variant="body2" color="text.secondary"> Published: {published ? "Yes" : "No"} </Typography>
		</CardContent>
	</Card>
);
}

export default Courses;
```


## Course Update


---


This is a combination of submitting form and display card. Connecting previous pieces together.


Below is the only new thing in it. Handling the parameters in route.


```javascript
// In App.JSX
<Route path="/course/:courseId" element={<Course/>}></Route>

// To get the value from parameter.
let {courseId} = useParams();
```


## Libraries


---


**State Management Libraries** : Smart state management that only re-renders the components that should be, not all components.


**Most Popular** : Redux, Recoil, Zustand


Explanation of these with example üëâ [Adv. State Management](https://www.notion.so/9dfc301d21144640b0bd2adbdf90a21b) 


## Extra Class

## File Structure, Axios

# File structuring of Backend


---


A single file makes **spaghetti**, so we make separate file and folders.

- `/db` :  Contains the Schema and exports the variables

```javascript
// In index.js
const { User, Course, Admin } = require("../db")

// In db
module.exports = {
	User,
	Course,
	Admin
}
```

- `/middleware` : Contains secret, authenticateJWT

```javascript
// In index.js
const { User, Course, Admin } = require("../db")

// In db
module.exports = {
	authenticateJwt,
	SECRET
}
```

- `/routes` : Conversion from `app.{get/post/put}` to `router.{get/post/put}`

```javascript
// In index.js
const adminRouter = require("./routes/admin")
app.use("/admin", adminRouter)

// In admin.js
const router = express.Router()
router.{post/get/put}('/login', callback)
module.exports = router
```

- `index.js` : Contains essential imports, middlewares, routers, connection to mongoose.

> üí° General Metric, File > 100 Lines of Code, must be broken down.


## Object Destructuring


---


A cool way to extract properties from an object and assign them to individual variables in single line.


```javascript
// Define an object
const person = {
  firstName: 'John',
  lastName: 'Doe',
  age: 30,
  city: 'New York'
};

// Destructure the object
**const { firstName, lastName, age, city } = person;**

// Access the destructured variables
console.log(firstName); // Output: John
console.log(lastName);  // Output: Doe
console.log(age);       // Output: 30
console.log(city);      // Output: New York
```


## Axios vs fetch 


---


**Fetch** : Internal Library, in-built support.


**Axios** : External Library, needs to be installed.


> üí° Simply a cleaner way to write requests, under the hood axios uses `fetch`.


**POST - Example**


```javascript
// Axios
axios.post('https://api.example.com/data', { name: 'John', age: 25 })
  .then(response => console.log(response.data))
  .catch(error => console.error(error));

//Fetch
fetch('https://api.example.com/data', {
  method: 'POST',
  body: JSON.stringify({ name: 'John', age: 25 }),
  headers: {
    'Content-Type': 'application/json'
  }
})
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error(error));
```


**GET - Example**


```javascript
// Axios
axios.get('https://api.example.com/data')
  .then(response => console.log(response.data))
  .catch(error => console.error(error))

// Fetch
fetch('https://api.example.com/data')
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error =>console.error(error))
```


![Source : Link](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/30ed6201-f465-47aa-85b5-6e1d9930516d/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150708Z&X-Amz-Expires=3600&X-Amz-Signature=383966def30ffd44929dc2d08c84065469ae7791048f614cbc112c79ced30092&X-Amz-SignedHeaders=host&x-id=GetObject)


## Async Await


---


 **`async`** and **`await`** keywords are used with asynchronous code and make it appear synchronous


```javascript
// Await/Async
const func = async () => {
	const response = await axios.post('url', body);
	let data = response.data;
}

// Promise
const func = () => {
	axios.post('url', body)
	.then(callback)
}
```


```javascript
// Another Example
function delay(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

async function fetchData() {
  console.log('Fetching data...');
  await delay(2000); // Pause execution for 2 seconds
  console.log('Data fetched!');
  
  return 'Data';
}

fetchData();
```


> ‚ö†Ô∏è `await` keyword can only be inside `async` function.


This was covered previously in this as well. [Auth and Database](https://www.notion.so/0ed95fd33ffd4e8b8c2174cececfc812) 


## Grids in MUI


---


`Flexbox` and `Grid` are CSS Layout Techniques. Way to arrange/put Components on screen. YouTube video is the best way to understand both.


![Source : Link](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/e7e2197b-ec91-4fe3-b240-8c26a25d9f19/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150708Z&X-Amz-Expires=3600&X-Amz-Signature=4d4a74af9f2a53b5b39a5b72310a2aee3c1fa965d03e793b761a21ecdba3d951&X-Amz-SignedHeaders=host&x-id=GetObject)


> ‚ö†Ô∏è useEffect doesn‚Äôt allow using the async function. So we use `.then` syntax to work around.


## Adv. State Management

# **Prop Drilling,** Context**, Recoil**


[bookmark](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi)


> üì¢ Code Snippets, below work like charm, simply paste in App.jsx and install the essentials.


## Prop Drilling


---


Passing of props from `top to bottom` or `parent to child` is called **Prop Drilling**. Note : This is the only way you can pass top to botton.


Also, `useState` can be defined in parent only, because of which when child updates the prop, everything re-renders in all child.


**Problems**

1. In our example, count is being used by the counter component only, so ideally only that should be rendered.
2. Also, to pass prop to increase, decrease Component. It has to drill down via a complete chain of child.

![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/1790812c-450a-4437-80df-041ddee2ad7b/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150709Z&X-Amz-Expires=3600&X-Amz-Signature=ec4b10b6a533cfe28444a0becd545719a9f3ec6b329bd5645ed6d341ee16bdae&X-Amz-SignedHeaders=host&x-id=GetObject)


```javascript
import { useState } from 'react'
import './App.css'

export default function App() {
  const[count, setCount] = useState(0);
  return (
    <div>
      <h1> Counter Game </h1>
      <Buttons count={count} setCount={setCount}/>
      <Counter count={count} />
    </div>
  )
}

function Buttons({count, setCount}){
  return (<div>
    <Increase count={count} setCount={setCount}/>
    <Decrease count={count} setCount={setCount}/>
  </div>)
}

function Increase({count, setCount}){
  return <div>
    <button onClick={()=>setCount(count+1)}>Increase</button>
  </div>
}

function Decrease({count, setCount}){
  return <div>
    <button onClick={()=>setCount(count-1)}>Decrease</button>
  </div>
}

function Counter({count}){
  return <div>
    <h1> {count} </h1>
  </div>
}
```


## Contexts


---


This **solves** the problem of **Prop Drilling**. Think of this as a global variable.


```javascript
import React, { useState, **createContext, useContext** } from 'react';
import './App.css';

**const CountContext = createContext();**

export default function App() {
  const [count, setCount] = useState(0);

  return (
    <CountContext.Provider value={{ count, setCount }}>
      <div>
        <h1>Counter Game</h1>
        <Buttons />
        <Counter />
      </div>
    **</CountContext.Provider>**
  );
}

function Buttons() {
  return (
    <div>
      <Increase />
      <Decrease />
    </div>
  );
}

function Increase() {
  **const { count, setCount } = useContext(CountContext);**

  return (
    <div>
      <button onClick={()=>setCount(count+1)}>Increase</button>
    </div>
  );
}

function Decrease() {
  **const { count, setCount } = useContext(CountContext);**

  return (
    <div>
      <button onClick={()=>setCount(count-1)>Decrease</button>
    </div>
  );
}

function Counter() {
  **const { count } = useContext(CountContext);**

  return (
    <div>
      <h1>{count}</h1>
    </div>
  );
}
```


## Recoil


---


This **solves** the problem of **Prop Drilling + Re-rendering**. This is not in-built, thus needs to be installed.


```javascript
import React from 'react';
**import { RecoilRoot, useRecoilValue, useSetRecoilState, atom } from 'recoil';**
import './App.css';

**const countState = atom({
  key: 'countState',
  default: 0
});**

export default function App() {

  return (
    **<RecoilRoot>**
      <div>
        <h1>Counter Game</h1>
        <Buttons />
        <Counter />
      </div>
    **</RecoilRoot>**
  );
}

function Buttons() {
  return (
    <div>
      <Increase />
      <Decrease />
    </div>
  );
}

function Increase() {
  **const setCount = useSetRecoilState(countState);**

  return (
    <div>
      <button onClick={() => setCount((prevCount) => prevCount + 1)}>Increase</button>
    </div>
  );
}

function Decrease() {
  **const setCount = useSetRecoilState(countState);**
  return (
    <div>
      <button onClick={() => setCount((prevCount) => prevCount - 1)}>Decrease</button>
    </div>
  );
}

function Counter() {
  **const count = useRecoilValue(countState);**

  return (
    <div>
      <h1>{count}</h1>
    </div>
  );
}
```

