
## Reconcilers

# Revisiting Reconciler


---


> ⚠️ This is in reference to the last week assignment, reconciler.


**Approach 1** : In _script-ugly,_ remove everything what is already present and add everything what is new. 


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/de06ef2a-55ae-4ecc-b648-6d22e5354982/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150652Z&X-Amz-Expires=3600&X-Amz-Signature=05ea2b41f6ebb357a499db99074f98f5356bdf49b2c87ecdfdcc078f67b22699&X-Amz-SignedHeaders=host&x-id=GetObject)


**Approach 2** : In _script-less-ugly_, calculate the difference and make changes accordingly.


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/06cf7a7f-41fa-4320-9c4e-891036b1c76e/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150651Z&X-Amz-Expires=3600&X-Amz-Signature=1f59fc47aa78a8a68420aa69dbaf0e84bb5392704085f39458c25902ce96193f&X-Amz-SignedHeaders=host&x-id=GetObject)


**Approach 3** : In _script-vdom-comparision_, in approach 2 we are fetching complete DOM, which is expensive. So we keep the copy of original DOM in Virtual DOM. Thus, for current state, we refer vDOM instead of fetching original DOM and only diff changes are updated in original DOM. It is usually represented in a tree like structure.


![Source : Link](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/827ccb76-05c9-4d83-899d-881aca61a3cc/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150651Z&X-Amz-Expires=3600&X-Amz-Signature=aaefb2ab3eb4d3eff6e3af7936e0e3f10aa06eacd9e95e7616af72e000aaeff4&X-Amz-SignedHeaders=host&x-id=GetObject)


**Batch Updates**, one of the optimization features offered by react. When there are multiple state changes in a fraction of seconds. Then those changes are clubbed together & updated at the end.


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/49ea1c93-79f5-4ef8-8012-2382b440db33/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150652Z&X-Amz-Expires=3600&X-Amz-Signature=8dcc97362d77885b7523d2a296cc73057dfbfb0a68bc28f447b885e1cb2d5765&X-Amz-SignedHeaders=host&x-id=GetObject)


**Properties/Functions**

1. `Array.from` & `children` :  **children** property returns an HTMLCollection or a NodeList, which are array-like objects, not than actual JavaScript arrays. So we can’t use built-in array methods like forEach(), map(), etc. Thus, to convert it into actual JavaScript Array we use **Array.from**

```javascript
var currentChildren = Array.from(parentElement.children);
```

1. `dataset.id` : Each object in the array have so many properties and while creating the to-dos we stored **id** in dataset.

> ⚠️ Instead of this, we can achieve same by using `setAttribute` and `getAttribute`


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/b40c0118-d571-404a-89a5-856b37ae90f2/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150652Z&X-Amz-Expires=3600&X-Amz-Signature=7747bfead34eb2f2c52e50e57c3a01b986ad32a8fd8ce0d5cffb967df8594604&X-Amz-SignedHeaders=host&x-id=GetObject)


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/c14d4641-1bb8-4a98-b0a6-ca41adb96061/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150651Z&X-Amz-Expires=3600&X-Amz-Signature=116b0d31111da13ed65140c7057d90457f51f7334dda6638386707e4145ab68f&X-Amz-SignedHeaders=host&x-id=GetObject)

1. `filter` & `find` : The essence of _filter_ and _find_ is to give a boolean condition. Think of this like I am going to see each element one by one if the boolean condition given by you matches, I will return that element in case of `find` and will return all elements in case of `filter`.

![Source : Link](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/52876928-c78f-418a-b895-3e0d0cc6d05f/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150652Z&X-Amz-Expires=3600&X-Amz-Signature=77fbc33040160d34393957b71d092e5959cc73bf1d51bb16bfbfda452d6b5dd9&X-Amz-SignedHeaders=host&x-id=GetObject)

1. These are extra if you are interested.

![Source : Link](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/7918f2dd-0336-4a5e-96bd-63b63e5a4520/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150651Z&X-Amz-Expires=3600&X-Amz-Signature=81dd392f9cc39964b416d473f1f152f29978d346084d9f0a9ae33b84b79a3156&X-Amz-SignedHeaders=host&x-id=GetObject)


> ⛔ `fill` function is illustrated wrong in the diagram.  
> `fill(val);`  
> `fill(val, start);`	//fills array with value of val at index start  
> `fill(val, start, end);` //fills array with value of val at index start to index end


	`fill(val);`
	`fill(val, start);`	//fills array with value of val at index start
	`fill(val, start, end);` //fills array with value of val at index start to index end


## Starting React


---


> 💡 **Why react** : DOM Operations are expensive and writing code to make modifications are hard for application developer. So we have to React.  
> If this doesn’t convince you, simply think this will make frontend coding file easier.


**Boilerplate Creation Tool** : [Vite](https://vitejs.dev/) and run command `npm create vite@latest`

1. CRP (Create React App) : It is a CRAP 😂
2. Web Based Tools : [Stackblitz](https://stackblitz.com/), [CodeSandbox](https://codesandbox.io/), [Repl.it](http://repl.it/)
3. Vite : The Best
4. **Alternates** : Webpack, gulp, Grunt, Rollup, and Parcel

**State** : It is a special variable/container/data-holder given by react that “Reacts/Responds to the  change in this special variable, state by updating/rendering the corresponding component. 
Since it is special, not every variable is a state variable. So we have special Syntax.


```javascript
import { useState } from "react";

const [ stateName , setStateName] = useState({ ... }) // Initial Data

setStateName({ ... }) // Updated Data
```


```javascript
**import { useState } from "react";**

function App() {

  **const [todo, setTodo] = useState({**
    title : "Gym",
    description : "Hit at 5",
    id : 1
  **})**
	
// To mimic the state change after 3s
  setInterval(() => {
    **setTodo({**
      title : "Udpate Gym",
      description : "Update Hit at 5",
      id : 1
    **})**
  }, 3000)

  return (
    <>
      <h1>Title {todo.title}</h1>
      <h3>Description {todo.description}</h3>
      <h6>ID {todo.id}</h6>
    </>
  )
}


export default App
```


**Component** : Those HTML elements together make a component, a button can be a component, Title, Description, Button together makes component. These are usually inside a function, which is named `Frist Letter Capital` or Pascal Case and `jsx` file allows us to write JavaScript and HTML in single file.


```javascript
// From previous code, this is also a component		

<>
  <h1>Title {todo.title}</h1>
  <h3>Description {todo.description}</h3>
  <h6>ID {todo.id}</h6>
</>
```


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/a1648836-f15c-4d72-a951-b50c541eb517/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150652Z&X-Amz-Expires=3600&X-Amz-Signature=b1379df9948b50c031761d9320a967449e3eee504143fb9a7b7c51efd7736841&X-Amz-SignedHeaders=host&x-id=GetObject)


```javascript
// Above component may look like this.

import React from "react";

function Card({ imageSrc, description, buttonText }) {
  return (
    <div className="card">
      <img src={imageSrc}/>
      <div className="card-content">
        <p className="card-description">{description}</p>
        <button className="card-button">{buttonText}</button>
      </div>
    </div>
  );
}

export default Card;
```


**Props** : The term "prop" itself is short for "property”. Passing the state/data from one component to another/child component. 


```javascript
import { useState } from "react";

function App() {

  const [todo, setTodo] = useState({
    title : "Gym",
    description : "Hit at 5",
    id : 1
  })

  setInterval(() => {
    setTodo({
      title : "Udpate Gym",
      description : "Update Hit at 5",
      id : 1
    })
  }, 3000)

  return (
    <>
      <h1>Title {todo.title}</h1>
      <h3>Description {todo.description}</h3>
      <h6>ID {todo.id}</h6>
      **<MyButton eyeD={todo}></MyButton>**
    </>
  )
}

**// Child Component**
function MyButton(props){
  return(
    <div>
      <button>{props.eyeD.title}</button>
    </div>
  )
}

export default App
```


> 💡 As the state changes, the component is rendered.


## React & hooks

# **React, effects and custom hooks**


## Rendering Arrays


---


**Map** & **Filter** Recap : Returns a new array based on the condition provided.


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/5c12c014-0106-4f0f-b218-bdf4d7aed221/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150654Z&X-Amz-Expires=3600&X-Amz-Signature=748c71dd401dea7cceb613ae63e418949547e22354b04e3a464f819a4cdabd54&X-Amz-SignedHeaders=host&x-id=GetObject)


```javascript
const numbers = [1, 2, 3, 4, 5];

// Example using map
const doubledNumbers = numbers.map((number) => number * 2);
console.log(doubledNumbers); // Output: [2, 4, 6, 8, 10]

// Example using filter
const evenNumbers = numbers.filter((number) => number % 2 === 0);
console.log(evenNumbers); // Output: [2, 4]
```


![Source : Link](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/f9717f75-2a58-4bff-ae04-c46311b49871/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240118%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240118T150654Z&X-Amz-Expires=3600&X-Amz-Signature=1bd9f8b898566ac94115cdbd8829f84352327be1b8b82deb1a7656499d49301d&X-Amz-SignedHeaders=host&x-id=GetObject)


**Rendering Multiple Components**


In react, if we create an array of components and return it. It autopopulates the components.


```javascript
import { useState } from "react";

function App() {

  const [todos] = useState([
    {
      title : "Gym",
      description : "Hit at 5",
      id : 1
    },
    {
      title : "Lunch",
      description : "At 2",
      id : 2
    }])

  **return ( todos.map((todo) => {
    return (
      <>
        <h1>Title {todo.title}</h1>
        <h3>Description {todo.description}</h3>
        <h6>ID {todo.id}</h6>
      </>
    )
    }))**
}

export default App
```


```javascript
// Cleaner and using component child.

import { useState } from "react";

function App() {

  const [todos] = useState([
    {
      title : "Gym",
      description : "Hit at 5",
      id : 1
    },
    {
      title : "Lunch",
      description : "At 2",
      id : 2
    }])

  return ( todos.map((todo) => {
    return (
      <>
        **<TODO data={todo}></TODO>**
      </>
    )
    }))
}

**function TODO(props){
  return(
    <div>
      <>
        <h1>Title {props.data.title}</h1>
        <h3>Description {props.data.description}</h3>
        <h6>ID {props.data. id}</h6>
      </>
    </div>
  )
}**

export default App
```


## Hook


---


**useState** : It will hook/stick to the first initialized value until its state is updated. General Syntax : `useState( anyValidDataType )` 


```javascript
import { useEffect, useState } from "react";

function App() {

  const [todos, setTodo] = useState({
    title: "Gym",
    description: "Hit at 5",
    id: 1,
  });

// Rest code is to re-render App
  const [randomNumber] = useState(Math.random())
  console.log(randomNumber);

  setTimeout(()=>{
    setTodo({
      title: "Updated Gym",
      description: "Updated Hit at 5",
      id: 2,
    })
  }, 2000)

  return (
    <>
      <h1>Title {todos.title}</h1>
      <h3>Description {todos.description}</h3>
      <h6>ID {todos.id}</h6>
    </>
  );
}

export default App;
```


**useEffect** : Function inside is guarded, and called only once at first render, not in subsequent renders. General Syntax :  `useEffect( callback, [] )` , second parameter `[]` is an optional array that specifies the dependencies for the effect.


```javascript
import { useEffect, useState } from "react";

function App() {

  const [todos, setTodos] = useState([]); 

  useEffect(() => { 
    fetch("http://localhost:3000/todos")
      .then((response) => response.json())
        .then((data) => setTodos(data))
      }, [] )

  return (
    <>
      <h1>Title {todos.title}</h1>
      <h3>Description {todos.description}</h3>
      <h6>ID {todos.id}</h6>
    </>
  );
}

export default App;
```


> ⚠️ Rendering is happening twice because of `Strict Mode`. Note, this only happens in local development environment, not in production.


**Custom Hook** : As component naming convention is `PascalCase`, similarly Hook naming convention is to use; `use` before its name. Technically, a function using hooks inside to modularize the code. 


```javascript
import { useEffect, useState } from "react";

// The exact same code is 
function useTodos() { 

  const [todos, setTodos] = useState([]); 

  useEffect(() => { 
    fetch("http://localhost:3000/todos")
      .then((response) => response.json())
        .then((data) => setTodos(data))
      }, [] )

  return todos;
  
}

function App() {

  const todos = useTodos();

  return (
    <>
      <h1>Title {todos.title}</h1>
      <h3>Description {todos.description}</h3>
      <h6>ID {todos.id}</h6>
    </>
  );
}

export default App;
```


> 💡 **Web Sockets** is like having a direct phone line between your frontend and the backend Server. The server automatically sends the update to frontend whenever an update happens at backend. As in our case when we were adding more to-dos at the backend, we can take action on these updates in our frontend using Web Sockets, the right way instead of interval, timeout.


## Assignment Learnings

`axios` vs `fetch`


```javascript
// axios
axios.get('https://api.example.com/data')
  .then(response => console.log(response.data))
  .catch(error => console.error(error))

// fetch
fetch('https://api.example.com/data')
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error =>console.error(error))
```


**Child Component** must have code of a single component, not an array of components.


```javascript
import { useState, useEffect } from 'react';
import './App.css';
import axios from 'axios';

function App() {
  const [todos, setTodos] = useState([]);

  useEffect(() => {
    axios.get('http://localhost:3000/todos')
      .then(response => setTodos(response.data))
      .catch(error => console.error(error));
  }, []);

  const handleDelete = (id) => {
    axios.delete(`http://localhost:3000/todos/${id}`)
      .then(response => setTodos(response.data));
  };

  return (
    <>
      <div>
        <h1>Easy Todo App</h1>
        <input type="text" />
      </div>
      <ol>
        {todos.map(todo => (
          <TodoItem key={todo.id} todo={todo} handleDelete={handleDelete} />
        ))}
      </ol>
    </>
  );
}

function TodoItem({ todo, handleDelete }) {
  const { id, title, description } = todo;

  return (
    <li>
      <b>Title:</b> {title} <br />
      <b>Description:</b> {description} <br />
      <button onClick={() => handleDelete(id)}>Delete</button>
      <hr />
    </li>
  );
}

export default App;
```


Handling Forms is little Weird, but that is how it is


```javascript
import { useState, useEffect } from 'react';
import './App.css';
import axios from 'axios';

function App() {
  const [todos, setTodos] = useState([]);

  useEffect(() => {
    axios.get('http://localhost:3000/todos')
      .then(response => setTodos(response.data))
      .catch(error => console.error(error));
  }, []);

  const handleDelete = (id) => {
    axios.delete(`http://localhost:3000/todos/${id}`)
      .then(response => setTodos(response.data));
  };

  const [title, setTitle] = useState('');
  const [description, setDescription] = useState('');

  const handleTitleChange = (event) => {
    setTitle(event.target.value);
  };

  const handleDescriptionChange = (event) => {
    setDescription(event.target.value);
  };

  const handleSubmit = (event) => {
    event.preventDefault();
    const formData = { title, description };

    axios.post('http://localhost:3000/todos', formData, {headers: {'Content-Type': 'application/json'}})
      .then(response => console.log('Response from server:', response.data));

    setTitle('');
    setDescription('');
  }

  return (
    <>
      <form onSubmit={handleSubmit}>
      <label> Title: <input type="text" value={title} onChange={handleTitleChange} /> </label>
      <br />
      <label> Description:
        <input
          type="text"
          value={description}
          onChange={handleDescriptionChange}
        />
      </label>
      <br />
      <button type="submit">Submit</button>
    </form>
      <ol>
        {todos.map(todo => (
          <TodoItem key={todo.id} todo={todo} handleDelete={handleDelete} />
        ))}
      </ol>
    </>
  );
}

function TodoItem({ todo, handleDelete }) {
  const { id, title, description } = todo;

  return (
    <li>
      <b>Title:</b> {title} <br />
      <b>Description:</b> {description} <br />
      <button onClick={() => handleDelete(id)}>Delete</button>
      <hr />
    </li>
  );
}

export default App;
```


[😸 Week-4-Assignment](https://github.com/100xDevs-hkirat/all-assignments/tree/main/week-4)

