
# Foundation of Frontend | Reconciliation


## Finishing ToDo


---


> ‚ö†Ô∏è The following notes are primarily emphasising the essential concepts and learnings from the video. So recommended performing hands on coding to get essence of below.


**GET Todos** and log it to console as soon as page loads, for which in the logic below we must call the function.


```javascript
function getTodos(){
		fetch("http://localhost:3000/todos", { method: "GET"} )
		.then( res => res.json() )
		.then( data => console.log(data) )
	}

getTodos();
```


**POST Todo** from frontend to backend taking user entered value as data from the form‚Äôs Input field like text and that value from text field is obtained by using `value` property. Below is the demonstration of the same.


![Screenshot_2023-06-27_at_10.22.59_AM.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/1dd45dc7-d2fd-45fd-adb2-29732c949180/Screenshot_2023-06-27_at_10.22.59_AM.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240117%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240117T214809Z&X-Amz-Expires=3600&X-Amz-Signature=c038cd37e7d765ba3d66046e94f7f7b56f0ac99746dee8b37e56650abbb5fb61&X-Amz-SignedHeaders=host&x-id=GetObject)


```javascript
function onPress(){
		var title = **document.getElementById('title').value**;
		var description = **document.getElementById('description').value**;
		fetch("http://localhost:3000/todos", {
			**method**: "POST",
			**body**: JSON.stringify({
				title: title,
				description: description
			}),
			**headers**: {
				"Content-Type": "application/json"
            	}
		})
		.then( () => console.log("Sent"))
	}
```


> üí° Body of a `fetch` request must be a string or a ReadableStream. So we have to use the `JSON.stringify()`


**DOM Manipulation**


DOM (Document Object Model), think of DOM as your HTML page/elements. From manipulation, we mean changing/updating the content or anything in HTML. As when we get todos from the backend, we want to add the todos to our front page. This is **DOM manipulation** and also behaviour of a **Dynamic Website**. 


Properties to understand


> üí° Recommended trying these once.

1. `innerHTML` vs `outerHTML : Image below demonstrates, when the value of an element is accessed what output is expected, but when you assign a value it is parsed HTML, not plain text/string`

![Source : Link](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/bfdf3b84-3be6-4a3b-adec-8f9ce5475a70/innerHTML_vs_outerHTML.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240117%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240117T214809Z&X-Amz-Expires=3600&X-Amz-Signature=aa74a0af7a3da546cc96c716bead712f1ff39e75ea1bc031078f18994bd4e806&X-Amz-SignedHeaders=host&x-id=GetObject)

1. `textContent` vs `innerHTML`

![txtContent_vs_innerHTML.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/dab264fc-c7ff-42f2-b0f6-c21c2479d445/txtContent_vs_innerHTML.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240117%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240117T214809Z&X-Amz-Expires=3600&X-Amz-Signature=d8c194fa2a69462c15f5580ff734026d9bdac40334878d47eaff150719de2de7&X-Amz-SignedHeaders=host&x-id=GetObject)

1. `value` Form elements, like text field have property named **value** to get the user entered text/value. Like in the example below, to get ‚ÄúJohn‚Äù and ‚ÄúDoe‚Äù we will use value property for the form fields.

![html_input_field.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/1616a1b7-3c3a-47e3-ab4e-d7a20e69f1b5/html_input_field.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240117%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240117T214809Z&X-Amz-Expires=3600&X-Amz-Signature=1e884b1fdefea93418ca5a1ece62dca26ba1aa0b2fc9ce4156adee3b1efd2f77&X-Amz-SignedHeaders=host&x-id=GetObject)

1. `createElement`  self-explanatory creates any HTML element like div, button etc.
2. `appendChild` think of append as **add**, it adds to the existing element.

![Screenshot_2023-06-27_at_1.27.42_PM.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/adb4cf1e-57bf-4975-8f06-cfac69c9a05b/Screenshot_2023-06-27_at_1.27.42_PM.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240117%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240117T214809Z&X-Amz-Expires=3600&X-Amz-Signature=ac7029d2c46c607df567e0a9b1121b4e8b21064a8e5a9094302ee6d4f86cec1d&X-Amz-SignedHeaders=host&x-id=GetObject)

1. `setAttribute`  this property adds the attribute along with the value to a HTML element.

![element-components.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/d8cf3984-27e3-4d8d-bc59-9c477cb5e61c/element-components.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240117%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240117T214809Z&X-Amz-Expires=3600&X-Amz-Signature=857d967103351d32089189440cb08292d2badcad476033f37bd0debd38a34025&X-Amz-SignedHeaders=host&x-id=GetObject)

1. `textContent` vs `innerText` : innerText returns visible text content of an element, while textContent returns the combined text of all the text nodes within the element.

```javascript
<div id="myElement">
  This is some <span style="display: none;">hidden</span> text.
</div>

const element = document.getElementById('myElement');

console.log(element.textContent); // Output: "This is some hidden text."
console.log(element.innerText);   // Output: "This is some text."
```


**Advise** : Create Todo App similar to this.


[bookmark](https://twitter.com/i/status/1672947333695152128)


**Adding to-do to mainArea**


To insert to-do like below, along with button having attribute.


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/70de1b5c-56b6-4b63-bad7-bbd715032fc0/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240117%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240117T214809Z&X-Amz-Expires=3600&X-Amz-Signature=072fb1249beecb80a155a7b3e721994781a60dd32885654d0100cd2c681e23db&X-Amz-SignedHeaders=host&x-id=GetObject)


This will be the JavaScript code.


```javascript
function addTodo(data) {
        
        var parentElement = document.getElementById("mainArea");
        var childElement = document.createElement("div");

        var grandChildElement1 = document.createElement("span");
        grandChildElement1.innerHTML = data.title

        var grandChildElement2 = document.createElement("span");
        grandChildElement2.innerHTML = data.description

        var grandChildElement3 = document.createElement("button");
        grandChildElement3.innerHTML = "Delete"
				grandChildElement3.setAttribute("onclick", "deleteTodo(" + data[i].id + ")")

        childElement.appendChild(grandChildElement1)
        childElement.appendChild(grandChildElement2)
        childElement.appendChild(grandChildElement3)

        parentElement.appendChild(childElement);
    }
```


## Diving into legacy frontends.


---


The concept below helps to understand why HTML, CSS, and JS wasn‚Äôt enough to build modern day apps.


**Reconciliation** : Auto updating the DOM/user interface(UI)/HTML as soon as state/variable changes. Think of state as variable, and UI/DOM as html elements. So whenever there is any change in state/variable, UI/DOM must update/react accordingly.


> üí° Reconciliation is like a motion sensor light that turns on when there is motion and turns off when there is no motion. The motion represents the state/variable, and the light's response represents the UI changes based on that state.


![Screenshot_2023-06-27_at_8.10.52_PM.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4dd32e22-0b9d-4863-baa0-84dfdaf49ec9/9989a237-614f-4b15-ae83-72f639c9310b/Screenshot_2023-06-27_at_8.10.52_PM.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45HZZMZUHI%2F20240117%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240117T214809Z&X-Amz-Expires=3600&X-Amz-Signature=a2641555b764be8fa2fd314af293014f8ef9ce544af589275980ff6106b3ad50&X-Amz-SignedHeaders=host&x-id=GetObject)


> üí° Under the hood, frameworks like ReactJS, VueJS, AngularJS uses javascript properties like `appendChild` , `removeChild` , `createElement`. As browsers only understand JavaScript, so these are the fundamental to it.


> üí° The frameworks like ReactJS, VueJS, AngularJS came into picture to hide these complexities and long verbose code. Made us to focus on states.


**Building Reconciler** : Not an ideal one, it shouldn‚Äôt remove all and then add


```javascript
function createDomElements(data) {
  var parentElement = document.getElementById("mainArea");
  parentElement.innerHTML = "";
  for (var i = 0; i<data.length; i++) {
      var childElement = document.createElement("div");

      var grandChildElement1 = document.createElement("span");
      grandChildElement1.innerHTML = data[i].title

      var grandChildElement2 = document.createElement("span");
      grandChildElement2.innerHTML = data[i].description

      var grandChildElement3 = document.createElement("button");
      grandChildElement3.innerHTML = "Delete"
      grandChildElement3.setAttribute("onclick", "deleteTodo(" + data[i].id + ")")

      childElement.appendChild(grandChildElement1)
      childElement.appendChild(grandChildElement2)
      childElement.appendChild(grandChildElement3)
      parentElement.appendChild(childElement);
  }
}

window.setInterval(() => {
  let todos = [];
  for (let i = 0; i<Math.floor(Math.random() * 100); i++) {
    todos.push({
      title: "Go to gym",
      description: "Go to gym form 5",
      id: i+1
    })
  }
  
  createDomElements(todos)
}, 1000000)
```

